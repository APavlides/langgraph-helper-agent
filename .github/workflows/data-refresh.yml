name: Validate Data

on:
  push:
    branches: [main, master]
    paths:
      - 'data/langchain_llms*.txt'
      - 'data/langgraph_llms*.txt'

jobs:
  validate:
    name: Validate Data Files
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Verify all data files exist
        run: |
          python -c "
          import os
          files = [
              'data/langchain_llms.txt',
              'data/langchain_llms_full.txt',
              'data/langgraph_llms.txt',
              'data/langgraph_llms_full.txt'
          ]
          for f in files:
              if not os.path.exists(f):
                  print(f'❌ {f} missing')
                  exit(1)
              size = os.path.getsize(f) / 1024 / 1024
              print(f'✓ {f} ({size:.1f}MB)')
          print('✓ All data files valid')
          "
      
      - name: Summary
        run: |
          echo "## ✅ Data Files Validated" >> $GITHUB_STEP_SUMMARY
          echo "All documentation files present and valid" >> $GITHUB_STEP_SUMMARY
